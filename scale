import React, { useState } from 'react';
import { Crown, Swords, Sparkles, Heart } from 'lucide-react';

const ArchetypeQuiz = () => {
  const [currentQuestion, setCurrentQuestion] = useState(0);
  const [scores, setScores] = useState({ king: 0, warrior: 0, magician: 0, lover: 0 });
  const [showResult, setShowResult] = useState(false);

  const questions = [
    {
      q: "When facing a major decision, you:",
      answers: [
        { text: "Take charge immediately and decide the direction", type: "king", points: 3 },
        { text: "Analyze all options and strategize the best move", type: "magician", points: 3 },
        { text: "Consider how it affects the people you care about", type: "lover", points: 3 },
        { text: "Act decisively without overthinking", type: "warrior", points: 3 },
        { text: "Seek input but ultimately trust your gut", type: "king", points: 1 }
      ]
    },
    {
      q: "In a conflict, you're most likely to:",
      answers: [
        { text: "Stand your ground and enforce boundaries", type: "warrior", points: 3 },
        { text: "Understand the deeper dynamics at play", type: "magician", points: 3 },
        { text: "Seek resolution that preserves the relationship", type: "lover", points: 3 },
        { text: "Lead the situation toward a clear outcome", type: "king", points: 3 },
        { text: "Avoid it unless absolutely necessary", type: "lover", points: 1 }
      ]
    },
    {
      q: "Your ideal weekend involves:",
      answers: [
        { text: "Deep work on a project or learning something new", type: "magician", points: 3 },
        { text: "Physical training or competitive activity", type: "warrior", points: 3 },
        { text: "Quality time with people you love", type: "lover", points: 3 },
        { text: "Planning and organizing your next moves", type: "king", points: 3 },
        { text: "A mix of productivity and pleasure", type: "magician", points: 1 }
      ]
    },
    {
      q: "People describe you as:",
      answers: [
        { text: "Intense and driven", type: "warrior", points: 3 },
        { text: "Insightful and strategic", type: "magician", points: 3 },
        { text: "Passionate and connected", type: "lover", points: 3 },
        { text: "Commanding and decisive", type: "king", points: 3 },
        { text: "Balanced and grounded", type: "king", points: 1 }
      ]
    },
    {
      q: "When you're stressed, you:",
      answers: [
        { text: "Push harder until you break through", type: "warrior", points: 3 },
        { text: "Retreat inward to think and strategize", type: "magician", points: 3 },
        { text: "Feel everything deeply and need connection", type: "lover", points: 3 },
        { text: "Take control and impose order", type: "king", points: 3 },
        { text: "Become cold and disconnected", type: "magician", points: 1 }
      ]
    },
    {
      q: "Your relationship to rules is:",
      answers: [
        { text: "I make the rules or break them intentionally", type: "king", points: 3 },
        { text: "I follow what makes strategic sense", type: "magician", points: 3 },
        { text: "I value connection over rigid structures", type: "lover", points: 3 },
        { text: "I respect discipline and structure", type: "warrior", points: 3 },
        { text: "Rules are guidelines, not absolutes", type: "magician", points: 1 }
      ]
    },
    {
      q: "What drives you most?",
      answers: [
        { text: "Building something that lasts", type: "king", points: 3 },
        { text: "Mastering skills and knowledge", type: "magician", points: 3 },
        { text: "Deep experiences and connections", type: "lover", points: 3 },
        { text: "Achieving goals and winning", type: "warrior", points: 3 },
        { text: "Freedom and autonomy", type: "king", points: 1 }
      ]
    },
    {
      q: "Your biggest weakness is:",
      answers: [
        { text: "Being too controlling or rigid", type: "king", points: 3 },
        { text: "Overthinking instead of acting", type: "magician", points: 3 },
        { text: "Getting lost in emotion or pleasure", type: "lover", points: 3 },
        { text: "Burning out from relentless drive", type: "warrior", points: 3 },
        { text: "Struggling to trust others", type: "warrior", points: 1 }
      ]
    },
    {
      q: "In a group, you naturally:",
      answers: [
        { text: "Lead and set the direction", type: "king", points: 3 },
        { text: "Strategize and advise", type: "magician", points: 3 },
        { text: "Connect people and create energy", type: "lover", points: 3 },
        { text: "Execute and get things done", type: "warrior", points: 3 },
        { text: "Observe and assess dynamics", type: "magician", points: 1 }
      ]
    },
    {
      q: "Your relationship to pleasure is:",
      answers: [
        { text: "I enjoy it but don't need it", type: "king", points: 3 },
        { text: "I'm often disconnected from it", type: "magician", points: 3 },
        { text: "I live for deep experiences", type: "lover", points: 3 },
        { text: "I delay it until the mission is complete", type: "warrior", points: 3 },
        { text: "I balance work and play", type: "lover", points: 1 }
      ]
    }
  ];

  const results = {
    king: {
      icon: Crown,
      title: "The King",
      tagline: "You are the architect of order and vision.",
      description: "You're driven by purpose and responsibility. You see the bigger picture and naturally take charge when leadership is needed. People look to you for direction because you provide stability in chaos. Your strength is your ability to create structure and inspire others through your certainty.",
      shadow: "But beware: when wounded, the King becomes either the Tyrant (controlling, domineering) or the Weakling (passive, avoiding responsibility). Your challenge is to lead with blessing, not domination.",
      growth: "Develop your Lover energy to stay connected to joy and passion. Cultivate your Warrior to execute on your vision without hesitation."
    },
    warrior: {
      icon: Swords,
      title: "The Warrior",
      tagline: "You are the embodiment of discipline and action.",
      description: "You're built for execution. When others hesitate, you move. You have the discipline to endure discomfort and the courage to face challenges head-on. Your boundaries are clear, and you protect what matters without apology. You don't negotiate with your feelings—you act despite them.",
      shadow: "But beware: when wounded, the Warrior becomes either the Sadist (cruel, aggressive without cause) or the Masochist (turns aggression inward, can't set boundaries). Your challenge is to serve something greater than yourself.",
      growth: "Develop your Magician energy to think strategically before acting. Cultivate your Lover to remember what you're fighting for."
    },
    magician: {
      icon: Sparkles,
      title: "The Magician",
      tagline: "You are the master of insight and transformation.",
      description: "You see patterns others miss. You understand systems—psychology, strategy, leverage. You're the advisor, the one who knows how things really work beneath the surface. Your power comes from knowledge and your ability to transform situations through insight rather than force.",
      shadow: "But beware: when wounded, the Magician becomes either the Manipulator (uses knowledge for selfish gain) or the Innocent (refuses to see truth to avoid responsibility). Your challenge is to use your insight in service of others, not just yourself.",
      growth: "Develop your Warrior energy to act on what you know instead of staying in analysis. Cultivate your King to provide direction for your knowledge."
    },
    lover: {
      icon: Heart,
      title: "The Lover",
      tagline: "You are the embodiment of passion and connection.",
      description: "You feel deeply and experience life vividly. You're connected to beauty, pleasure, emotion, and meaning. Your strength is your ability to connect—with yourself, with others, with the moment. You bring aliveness to everything you touch. You don't just exist; you experience.",
      shadow: "But beware: when wounded, the Lover becomes either the Addict (chasing sensation without satisfaction) or the Impotent (numb, disconnected, unable to feel). Your challenge is to channel your passion into creation, not just consumption.",
      growth: "Develop your Warrior energy to add discipline to your passion. Cultivate your King to give structure to your creativity."
    }
  };

  const handleAnswer = (type, points) => {
    setScores(prev => ({
      ...prev,
      [type]: prev[type] + points
    }));

    if (currentQuestion < questions.length - 1) {
      setCurrentQuestion(prev => prev + 1);
    } else {
      setShowResult(true);
    }
  };

  const getTopArchetype = () => {
    return Object.keys(scores).reduce((a, b) => scores[a] > scores[b] ? a : b);
  };

  const resetQuiz = () => {
    setCurrentQuestion(0);
    setScores({ king: 0, warrior: 0, magician: 0, lover: 0 });
    setShowResult(false);
  };

  if (showResult) {
    const topArchetype = getTopArchetype();
    const result = results[topArchetype];
    const Icon = result.icon;

    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white p-4 md:p-8">
        <div className="max-w-2xl mx-auto">
          <div className="text-center mb-8">
            <h1 className="text-3xl md:text-4xl font-bold mb-2">YOUR ARCHETYPE</h1>
            <div className="w-24 h-1 bg-gradient-to-r from-amber-500 to-orange-500 mx-auto"></div>
          </div>

          <div className="bg-slate-800/50 backdrop-blur border border-slate-700 rounded-lg p-8 mb-6">
            <div className="flex items-center justify-center mb-6">
              <Icon className="w-20 h-20 text-amber-500" />
            </div>
            
            <h2 className="text-4xl font-bold text-center mb-2">{result.title}</h2>
            <p className="text-xl text-amber-500 text-center mb-8 italic">{result.tagline}</p>
            
            <div className="space-y-4 text-slate-300 leading-relaxed">
              <p>{result.description}</p>
              <p className="text-red-400">{result.shadow}</p>
              <p className="text-emerald-400">{result.growth}</p>
            </div>
          </div>

          <div className="bg-gradient-to-r from-amber-600 to-orange-600 rounded-lg p-6 mb-6 text-center">
            <h3 className="text-2xl font-bold mb-3">Want to develop ALL four archetypes?</h3>
            <p className="mb-4 text-slate-100">
              Scale Protocol gives you the complete system for integrating King, Warrior, Magician, and Lover—plus frameworks for money and relationships.
            </p>
            <a 
              href="https://scaleprotocol.gumroad.com/l/sp"
              target="_blank"
              rel="noopener noreferrer"
              className="inline-block bg-white text-slate-900 font-bold px-8 py-3 rounded-lg hover:bg-slate-100 transition-colors"
            >
              Get Scale Protocol – $29
            </a>
          </div>

          <button
            onClick={resetQuiz}
            className="w-full py-3 border border-slate-600 rounded-lg hover:bg-slate-800 transition-colors"
          >
            Take Quiz Again
          </button>

          <div className="text-center mt-6 text-slate-500 text-sm">
            Scale Protocol • Build yourself. The rest follows.
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white p-4 md:p-8">
      <div className="max-w-2xl mx-auto">
        {currentQuestion === 0 && (
          <div className="text-center mb-12">
            <h1 className="text-4xl md:text-5xl font-bold mb-4">
              Which Man Are You?
            </h1>
            <p className="text-xl text-slate-400 mb-2">The Scale Archetype Test</p>
            <div className="w-24 h-1 bg-gradient-to-r from-amber-500 to-orange-500 mx-auto mb-6"></div>
            <p className="text-slate-300 max-w-xl mx-auto">
              Discover your dominant masculine archetype. 10 questions. No bullshit.
            </p>
          </div>
        )}

        <div className="mb-8">
          <div className="flex justify-between items-center mb-4">
            <span className="text-sm text-slate-400">
              Question {currentQuestion + 1} of {questions.length}
            </span>
            <span className="text-sm text-slate-400">
              {Math.round(((currentQuestion) / questions.length) * 100)}%
            </span>
          </div>
          <div className="w-full bg-slate-700 rounded-full h-2">
            <div 
              className="bg-gradient-to-r from-amber-500 to-orange-500 h-2 rounded-full transition-all duration-300"
              style={{ width: `${((currentQuestion) / questions.length) * 100}%` }}
            ></div>
          </div>
        </div>

        <div className="bg-slate-800/50 backdrop-blur border border-slate-700 rounded-lg p-8 mb-6">
          <h2 className="text-2xl font-bold mb-8">{questions[currentQuestion].q}</h2>
          
          <div className="space-y-3">
            {questions[currentQuestion].answers.map((answer, idx) => (
              <button
                key={idx}
                onClick={() => handleAnswer(answer.type, answer.points)}
                className="w-full text-left p-4 bg-slate-700/50 hover:bg-slate-700 border border-slate-600 hover:border-amber-500 rounded-lg transition-all duration-200"
              >
                <span className="text-slate-300">{answer.text}</span>
              </button>
            ))}
          </div>
        </div>

        <div className="text-center text-slate-500 text-sm">
          Scale Protocol • Build yourself. The rest follows.
        </div>
      </div>
    </div>
  );
};

export default ArchetypeQuiz;
